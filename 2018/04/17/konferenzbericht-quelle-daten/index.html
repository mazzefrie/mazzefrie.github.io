<!DOCTYPE html>
<html lang="de">

  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
    
      Historiker als soziales Netzwerk - Konferenzberichte als (Daten-)Quelle &middot; Matthias Friedmann
    
  </title>

  <style type="text/css">*{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}html,body{margin:0;padding:0}html{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI","Roboto","Oxygen","Ubuntu","Cantarell","Fira Sans","Droid Sans","Helvetica Neue",Arial,sans-serif;font-size:16px;line-height:1.5}@media (min-width: 38em){html{font-size:20px}}body{color:#515151;background-color:#fff;-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%}a{color:#268bd2;text-decoration:none}a:hover,a:focus{text-decoration:underline}a strong{color:inherit}img{display:block;max-width:100%;margin:0 0 1rem;border-radius:5px}table{margin-bottom:1rem;width:100%;font-size:85%;border:1px solid #e5e5e5;border-collapse:collapse}td,th{padding:.25rem .5rem;border:1px solid #e5e5e5}th{text-align:left}tbody tr:nth-child(odd) td,tbody tr:nth-child(odd) th{background-color:#f9f9f9}h1,h2,h3,h4,h5,h6{margin-bottom:.5rem;font-weight:600;line-height:1.25;color:#313131;text-rendering:optimizeLegibility}h1{font-size:2rem}h2{margin-top:1rem;font-size:1.5rem}h3{margin-top:1.5rem;font-size:1.25rem}h4,h5,h6{margin-top:1rem;font-size:1rem}p{margin-top:0;margin-bottom:1rem}strong{color:#303030}ul,ol,dl{margin-top:0;margin-bottom:1rem}dt{font-weight:bold}dd{margin-bottom:.5rem}hr{position:relative;margin:1.5rem 0;border:0;border-top:1px solid #eee;border-bottom:1px solid #fff}abbr{font-size:85%;font-weight:bold;color:#555;text-transform:uppercase}abbr[title]{cursor:help;border-bottom:1px dotted #e5e5e5}blockquote{padding:.5rem 1rem;margin:.8rem 0;color:#7a7a7a;border-left:.25rem solid #e5e5e5}blockquote p:last-child{margin-bottom:0}@media (min-width: 30em){blockquote{padding-right:5rem;padding-left:1.25rem}}a[href^="#fn:"],a[href^="#fnref:"]{display:inline-block;margin-left:.1rem;font-weight:bold}.footnotes{margin-top:2rem;font-size:85%}.lead{font-size:1.25rem;font-weight:300}.highlighter-rouge .hll{background-color:#ffc}.highlighter-rouge .c{color:#999}.highlighter-rouge .err{color:#a00;background-color:#faa}.highlighter-rouge .k{color:#069}.highlighter-rouge .o{color:#555}.highlighter-rouge .cm{color:#09f;font-style:italic}.highlighter-rouge .cp{color:#099}.highlighter-rouge .c1{color:#999}.highlighter-rouge .cs{color:#999}.highlighter-rouge .gd{background-color:#fcc;border:1px solid #c00}.highlighter-rouge .ge{font-style:italic}.highlighter-rouge .gr{color:red}.highlighter-rouge .gh{color:#030}.highlighter-rouge .gi{background-color:#cfc;border:1px solid #0c0}.highlighter-rouge .go{color:#aaa}.highlighter-rouge .gp{color:#009}.highlighter-rouge .gu{color:#030}.highlighter-rouge .gt{color:#9c6}.highlighter-rouge .kc{color:#069}.highlighter-rouge .kd{color:#069}.highlighter-rouge .kn{color:#069}.highlighter-rouge .kp{color:#069}.highlighter-rouge .kr{color:#069}.highlighter-rouge .kt{color:#078}.highlighter-rouge .m{color:#f60}.highlighter-rouge .s{color:#d44950}.highlighter-rouge .na{color:#4f9fcf}.highlighter-rouge .nb{color:#366}.highlighter-rouge .nc{color:#0a8}.highlighter-rouge .no{color:#360}.highlighter-rouge .nd{color:#99f}.highlighter-rouge .ni{color:#999}.highlighter-rouge .ne{color:#c00}.highlighter-rouge .nf{color:#c0f}.highlighter-rouge .nl{color:#99f}.highlighter-rouge .nn{color:#0cf}.highlighter-rouge .nt{color:#2f6f9f}.highlighter-rouge .nv{color:#033}.highlighter-rouge .ow{color:#000}.highlighter-rouge .w{color:#bbb}.highlighter-rouge .mf{color:#f60}.highlighter-rouge .mh{color:#f60}.highlighter-rouge .mi{color:#f60}.highlighter-rouge .mo{color:#f60}.highlighter-rouge .sb{color:#c30}.highlighter-rouge .sc{color:#c30}.highlighter-rouge .sd{color:#c30;font-style:italic}.highlighter-rouge .s2{color:#c30}.highlighter-rouge .se{color:#c30}.highlighter-rouge .sh{color:#c30}.highlighter-rouge .si{color:#a00}.highlighter-rouge .sx{color:#c30}.highlighter-rouge .sr{color:#3aa}.highlighter-rouge .s1{color:#c30}.highlighter-rouge .ss{color:#fc3}.highlighter-rouge .bp{color:#366}.highlighter-rouge .vc{color:#033}.highlighter-rouge .vg{color:#033}.highlighter-rouge .vi{color:#033}.highlighter-rouge .il{color:#f60}.css .o,.css .o+.nt,.css .nt+.nt{color:#999}code,pre{font-family:Menlo,Monaco,"Courier New",monospace}code{padding:.25em .5em;font-size:85%;color:#bf616a;background-color:#f9f9f9;border-radius:3px}pre{margin-top:0;margin-bottom:1rem;width:100%;overflow-x:auto}pre code{padding:0;font-size:100%;color:inherit;background-color:transparent}.highlight{padding:1rem;margin-bottom:1rem;font-size:.8rem;line-height:1.4;background-color:#f9f9f9;border-radius:.25rem}.highlight pre{margin-bottom:0;overflow-x:auto}.highlight .lineno{display:inline-block;padding-right:.75rem;padding-left:.25rem;color:#999;-webkit-user-select:none;-moz-user-select:none;user-select:none}.container{max-width:38rem;padding-left:1.5rem;padding-right:1.5rem;margin-left:auto;margin-right:auto}footer{margin-bottom:2rem}.toc{border:1px solid black;padding:0 15px;margin:0 -1em;background-color:#f9f9f9}.toc a{color:#717171}.masthead{padding-top:1rem;padding-bottom:1rem;margin-bottom:3rem}.masthead-title{margin-top:0;margin-bottom:0;color:#515151}.masthead-title a{color:inherit}.masthead-title small{font-size:75%;font-weight:400;opacity:.5}.page,.post{margin-bottom:4em}.page li+li,.post li+li{margin-top:.25rem}.page-title,.post-title,.post-title a{color:#303030}.page-title,.post-title{margin-top:0}.post-date{display:block;margin-top:-.5rem;margin-bottom:1rem;color:#9a9a9a}.related{padding-top:2rem;padding-bottom:2rem;margin-bottom:2rem;border-top:1px solid #eee;border-bottom:1px solid #eee}.related-posts{padding-left:0;list-style:none}.related-posts h3{margin-top:0}.related-posts li small{font-size:75%;color:#999}.related-posts li a:hover{color:#268bd2;text-decoration:none}.related-posts li a:hover small{color:inherit}.pagination{overflow:hidden;margin:0 -1.5rem 1rem;color:#ccc;text-align:center}.pagination-item{display:block;padding:1rem;border:solid #eee;border-width:1px 0}.pagination-item:first-child{margin-bottom:-1px}a.pagination-item:hover{background-color:#f5f5f5}@media (min-width: 30em){.pagination{margin:3rem 0}.pagination-item{float:left;width:50%;border-width:1px}.pagination-item:first-child{margin-bottom:0;border-top-left-radius:4px;border-bottom-left-radius:4px}.pagination-item:last-child{margin-left:-1px;border-top-right-radius:4px;border-bottom-right-radius:4px}}.message{margin-bottom:1rem;padding:1rem;color:#717171;background-color:#f9f9f9}
</style>
  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">
  <link rel="alternate" type="application/atom+xml" title="Matthias Friedmann" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Matthias Friedmann</a>
          
              &nbsp;&nbsp;&nbsp;<small><a href="/about/">About</a></small>
          
        </h3>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">Historiker als soziales Netzwerk - Konferenzberichte als (Daten-)Quelle</h1>
  <time datetime="2018-04-17T00:00:00+02:00" class="post-date">17 Apr 2018</time>
  <p>Die Tagungsberichte von HSozKult enthalten neben einer umfassenden Zusammenfassung der Vorträge viele nützliche Informationen: Name und Ursprung des Berichts, Thema, Zeit und Ort der Konferenz, Namen und Herkunftsorte der Referenten sowie durch die Redakteure vergeben Schlagworte für die Epochen und Themenbereiche der Veranstaltung. Die meisten dieser Daten lassen sich regelhaft auslesen.</p>

<nav class="toc">
  <h4>Inhalt</h4>
<ul id="markdown-toc">
  <li><a href="#lesen-und-normalisierung-der-daten" id="markdown-toc-lesen-und-normalisierung-der-daten">Lesen und Normalisierung der Daten</a></li>
  <li><a href="#part-of-speech-zur-identifikation-der-teilnehmer" id="markdown-toc-part-of-speech-zur-identifikation-der-teilnehmer">Part-of-Speech zur Identifikation der Teilnehmer</a></li>
  <li><a href="#probleme" id="markdown-toc-probleme">Probleme</a>    <ul>
      <li><a href="#teilnehmer-pro-konferenz-im-jahresdurchschnitt-stand-vom-28042018" id="markdown-toc-teilnehmer-pro-konferenz-im-jahresdurchschnitt-stand-vom-28042018">Teilnehmer pro Konferenz im Jahresdurchschnitt, Stand vom 28.04.2018:</a></li>
    </ul>
  </li>
  <li><a href="#die-datenstze" id="markdown-toc-die-datenstze">Die Datensätze</a>    <ul>
      <li><a href="#liste-der-konferenzen" id="markdown-toc-liste-der-konferenzen">Liste der Konferenzen</a></li>
      <li><a href="#liste-der-teilnehmer" id="markdown-toc-liste-der-teilnehmer">Liste der Teilnehmer</a></li>
    </ul>
  </li>
  <li><a href="#nchste-schritte" id="markdown-toc-nchste-schritte">Nächste Schritte</a></li>
  <li><a href="#link-zum-aktuellen-gist" id="markdown-toc-link-zum-aktuellen-gist">Link zum aktuellen Gist</a></li>
</ul>

</nav>

<h2 id="lesen-und-normalisierung-der-daten">Lesen und Normalisierung der Daten</h2>
<p>Die Konferenzberichte von HSozKult weisen zunächst nur bedingt Anhaltspunkte auf mit deren Hife sich Metadaten identifizieren ließen. Allerdings erkennt man im Quelltext durchaus einen regelhaften Aufbau: Mit CSS-Klassen wie <em>hfn-item-key</em> oder <em>metaBlock</em> und <em>metaBlockKey</em> sowie den dem Geschwister oder Eltern-Selektor können identifiziert werden. Auf Basis der CSS-Klassen lassen sich die Daten jeweils Ort, Name und Datum der Konferenz auslesen, ebenso der Autor des Berichts sowie die vergeben Schlagworte.</p>

<h2 id="part-of-speech-zur-identifikation-der-teilnehmer">Part-of-Speech zur Identifikation der Teilnehmer</h2>
<p>Der Text des Berichts selbst jedoch besteht aus nicht semantischem HTML. Daten aus diesem Berich zu extrahieren bedarf also eines größeren Aufwands. Mit Hilfe er <em>nltk</em>-Bibliothek lässt sich der Text zunächst in tokens zerlegen und eine part-of-speech-Erkennung durchführen. <em>nltk</em> wird jedoch zunächst nur mit einem englischen Model geliefert und daher muss zunächst ein entsprechendes Model für die deutsche Sprache geladen werden.<sup id="fnref:1"><a href="#fn:1" class="footnote">1</a></sup></p>

<pre><code class="language-python">	import nltk
	import pickle
	from nltk.tokenize import word_tokenize

	with open('nltk_german_classifier_data.pickle', 'rb') as f:
	    tagger = pickle.load(f)

	tokens = word_tokenize( html_text )
	tagged = tagger.tag(tokens)
</code></pre>

<p>Damit erhalt man einen entsprechenden Graphen, in dem die jeweilien Tokens in ihrer Funktion im Satz identifiziert wurden. Dabei konnten Tokens als Namen identifiziert werden. Allerdings wird dabei noch nicht zwischen Vor- und Nachnamen oder gar Orts- und funktionalen Namen (“Universität”) unterschieden. Es zeigt sich jedoch, dass in der Mehrheit der Berichte die redaktionelle Konvention besteht, die Namen von Rednern in Großbuchstaben gefolgt von dem Ortnamen darzustellen:</p>

<blockquote>
  <p>MATTHIAS FRIEDMANN (Münster) stellte in seinem Vortrag die wichtige kommunikative Funktion von Informationen dar.</p>
</blockquote>

<p>Der markierte Token-Baum musste also nach aufeinanderfolgenden Namen (Tokens markiert als NE) sowie Text in Großbuchstaben durchsucht werde, z.B.:</p>

<pre><code class="language-python">    for index, obj in enumerate(tagged):
        try:

            if obj[1] == "NE" and obj[0].isupper():
                name.append(obj[0])
            else:
            	# Es ist kein Name, sondern vielleicht ein Ort?

        except (ValueError, IndexError):
            pass        
</code></pre>

<p>Sicherlich gäbe es dafür auch eine elegantere Lösung. Prinzipiell könnte dies auch mit regulären Ausdrücken umgesetzt werden.</p>

<p>Einige Fehler traten dabei auf, wenn mehrere Namen in Folge aufgelistet und nicht deutlich getrennt wurden, bei Namen die aus mehr als zwei Bausteinen (beispielsweise Namen mit “van” oder abgekürztem Zweitnamen) bestehen sowie schließlich Namen, bei denen die Konvention in Großbuchstaben zu schreiben nicht eingehalten wurden, was bei einem Teil der Berichte der Fall ist.</p>

<h2 id="probleme">Probleme</h2>
<p>Im ersten durchlauf gab es jedoch eine Reihe von Anomalien: Konferenzen mit nur 1, 2 oder 3 Teilnehmern schienen fragwürdig. Folgende Fehler konnte ich bisher identifizieren:</p>

<ul>
  <li>
    <p>Manche Konferenzberichte waren auf Englisch geschrieben und der deutsche Tagger konnte daher die Namen nicht immer erkennen. Es bedurfte also zusätzlich einer Spracherkennung<sup id="fnref:2"><a href="#fn:2" class="footnote">2</a></sup></p>
  </li>
  <li>
    <p>Schrägstriche zwischen Namen führten dazu, dass diese nicht auseinandergehalten werden konnten. Ebenso wurden FREIBURG/ KIEL oder HEIDELBERG/ LONDON als Name erkannt.</p>
  </li>
  <li>
    <p>Der Tagger hatte Probleme mit osteuropäischen Namen, besonders wenn sie Akkzente enthielten. Ich habe diese daher schlicht entfernt.</p>
  </li>
  <li>
    <p>BeautifulSoup hat in der full_text()-Funktion keine Leerzeichen nach Absätzen gelassen. Fing ein neuer Absatz mit einem Namen an, konnte der Tokenizer keine Trennung identifizieren.</p>
  </li>
</ul>

<h3 id="teilnehmer-pro-konferenz-im-jahresdurchschnitt-stand-vom-28042018">Teilnehmer pro Konferenz im Jahresdurchschnitt, Stand vom 28.04.2018:</h3>
<p><img src="/images/avg-part-2804.png" alt="Durchschnittliche Konferenzgröße" />
2323 Konferenzen mit weniger als 9 Teilnehmern: 8: 392, 7: 379, 6: 374, 5: 332, 4: 294, 3: 209, 1: 189, 2: 154</p>

<h2 id="die-datenstze">Die Datensätze</h2>
<p>Auf Basis dieser Vorgehensweise lassen sich schließlich zwei Datensätze generieren:</p>

<h3 id="liste-der-konferenzen">Liste der Konferenzen</h3>

<p>Der Datensatz setzt sich zusammen aus der ID des Konferenzberichts auf der Ursprungsseite, dem Titel der Konferenz, Anfangs- und Enddatum, die jeweils vergebenen Schlagworte für Epoche und Thema sowie die Anzahl der identifizierten Teilnehmer:</p>

<pre><code class="language-csv">Key,CID,Title,StartDate,EndDate,Epoche,Thema,Counts
1,4177,"„un/diszipliniert?“ Methoden, Theorien und Positionen der Frauen- und Geschlechtergeschichte",27.02.2012,29.02.2012,Epochal übergreifend,"Frauen-, Männer-  und Geschlechtergeschichte, Theorien und Methoden der Geschichtswissenschaften",4
2,3348,Am Ende des Meeres: Venedig und Lübeck im Mittelalter,26.09.2010,04.10.2010,Mittelalterliche Geschichte (476-1500),"Rechtsgeschichte und -wissenschaften, Sozial- und Gesellschaftsgeschichte / Sozialwissenschaften, Wirtschaftsgeschichte und -wissenschaften",18
3,3718,Podiumsdiskussion: Die Archive und die historische Forschung,27.06.2011,,Ohne epochalen Schwerpunkt,"Historische Grundwissenschaften / Hilfswissenschaften, Theorien und Methoden der Geschichtswissenschaften",5
</code></pre>

<h3 id="liste-der-teilnehmer">Liste der Teilnehmer</h3>

<p>Der Datensatz enthält ebenso die ID der Konferenz auf der Seite sowie den Namen der Person.</p>

<pre><code class="language-csv">Key,CID,Person
4,3718,ANDREAS P.
5,4177,BARBARA D.
6,4177,KAROLINA S.
</code></pre>

<p>Wobei die <em>CID</em> der Konferenz-ID auf der HSozKult-Seite entspricht.</p>

<h2 id="nchste-schritte">Nächste Schritte</h2>

<p>Dieser Datensatz kann nun weiter verarbeitet werden um beispielsweise ein soziales Netzwerk mit Gephi darzustellen.</p>

<h2 id="link-zum-aktuellen-gist">Link zum aktuellen Gist</h2>
<p>Ich habe einige Ansätze zum weiteren Ausbau des Skripts vorgesehen, da aufgrund der vielen Fehler mehrere druchläufe notwendig wurden und werden.
* <a href="https://gist.github.com/mazzefrie/ab420fd691bb0c35820102aa633631d1">extract_data.py</a></p>

<hr />
<div class="footnotes">
  <ol>
    <li id="fn:1">
      <p>Mit Hilfe des Tiger-Korpus lässt sich ein entsprechendes Model trainieren, siehe <a href="https://datascience.blog.wzb.eu/2016/07/13/accurate-part-of-speech-tagging-of-german-texts-with-nltk/">Markus Konrads Beitrag auf datascience.blog.wzb.eu</a> <a href="#fnref:1" class="reversefootnote">&#8617;</a></p>
    </li>
    <li id="fn:2">
      <p><a href="http://blog.alejandronolla.com/2013/05/15/detecting-text-language-with-python-and-nltk/">Alejandro Nollas Blog</a> <a href="#fnref:2" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>

</article>


<aside class="related">
  <h3>Related posts</h3>
  <ul class="related-posts">
    
      <li>
        <a href="/2018/04/29/konferenzberichte-karte/">
          Historiker als soziales Netzwerk - eine schnelle Karte
          <small><time datetime="2018-04-29T00:00:00+02:00">29 Apr 2018</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2018/04/17/sparql-karte/">
          Fingerübung in SPARQL - Geburtsorte deutscher Schriftsteller
          <small><time datetime="2018-04-17T00:00:00+02:00">17 Apr 2018</time></small>
        </a>
      </li>
    
      <li>
        <a href="/2018/04/16/historiker-als-netzwerk/">
          Historiker als soziales Netzwerk - (Medium-)Big Data!
          <small><time datetime="2018-04-16T00:00:00+02:00">16 Apr 2018</time></small>
        </a>
      </li>
    
  </ul>
</aside>


      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2018-04-29T16:47:45+02:00">2018</time>. All rights reserved.
        </small>
      </footer>
    </div>

    
  </body>
</html>
